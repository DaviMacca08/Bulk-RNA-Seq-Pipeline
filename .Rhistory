group_by(partito) |>
count(partito) |>
mutate(prop = n/sum(n))
summary
summary <- gss_cat |>
filter(partito == c("Democrat", "Republican", "Independent")) |>
group_by(partito) |>
summarise(
prop = n()/nrow(gss_cat)
)
summary
summary
summary <- gss_cat |>
filter(partito == c("Democrat", "Republican", "Independent")) |>
group_by(partito, year) |>
summarise(
prop = n()/nrow(gss_cat)
)
summary <- gss_cat |>
filter(partito == c("Democrat", "Republican", "Independent")) |>
group_by(partito, year) |>
summarise(
prop = n()/nrow(gss_cat)
)
summary <- gss_cat |>
filter(partito == c("Democrat", "Republican", "Independent")) |>
group_by(partito, year) |>
summarise(
prop = n()/nrow(gss_cat),
.group = "drop"
)
View(summary)
summary <- gss_cat |>
filter(partito == c("Democrat", "Republican", "Independent")) |>
group_by(partito, year) |>
summarise(
prop = n()/nrow(gss_cat),
.groups = "drop"
)
summary <- gss_cat |>
filter(partito == c("Democrat", "Republican", "Independent")) |>
group_by(partito, year) |>
summarise(
prop = n()/nrow(gss_cat),
.groups = "drop"
)
summary
ggplot(summary, aes(x = year, y = prop)) +
geom_line()
ggplot(summary, aes(x = year, y = prop)) +
geom_line() +
facet_grid(partito)
ggplot(summary, aes(x = year, y = prop)) +
geom_freqpoly(aes(colour = partito)) +
facet_wrap(partito)
ggplot(summary, aes(x = year, y = prop)) +
geom_freqpoly(aes(colour = partito))
ggplot(summary, aes(x = year, y = prop)) +
geom_line(aes(colour = partito)) +
facet_wrap(~partito)
?fct_lump()
library(tidyverse)
library(nycflights13)
today()
now()
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time)) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
make_datetime_100 <- function(year, month, day, time) {
make_datetime(year, month, day, time %/% 100, time %% 100)
}
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time)) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
flights_dt
ymd(c("2010-10-10", "banana"))
today(tzone = "India")
today(tzone = "IST")
today(tzone = "Italy/Catania")
d1 <- "January 1, 2010"
read_csv(d1, col_types = cols(date = col_date("%B/%e/%Y"
)))
col_date("%B/%e/%Y")
col_date(d1,"%B/%e/%Y")
col_date(d1,format = "%B/%e/%Y")
col_date(format = "%B %d, %Y")
d1 |>
col_date(format = "%B %d, %Y")
mdy(d1)
d4 <- c("August 19 (2015)", "July 1 (2015)")
mdy(d4)
View(flights)
flights_dt |>
mutate(dep_hour = dep_time - floor_date(dep_time,"day"))
flights_dt |>
mutate(dep_hour = dep_time - floor_date(dep_time,"day")) |>
relocate(dep_hour, .before = 1)
flights_dt |>
group_by(year) |>
mutate(dep_hour = dep_time - floor_date(dep_time,"day")) |>
relocate(dep_hour, .before = 1) |>
flo
flights_dt |>
group_by(year) |>
mutate(dep_hour = dep_time - floor_date(dep_time,"day")) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_line()
View(flights_dt)
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time, year)) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time), year) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time)) |>
select(year) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time)) |>
select(year) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time)) |>
select(year) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time)) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time)) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, ends_with("delay"), ends_with("time"))
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time)) |>
mutate(
dep_time = make_datetime_100(year, month, day, dep_time),
arr_time = make_datetime_100(year, month, day, arr_time),
sched_dep_time = make_datetime_100(year, month, day, sched_dep_time),
sched_arr_time = make_datetime_100(year, month, day, sched_arr_time)
) |>
select(origin, dest, year, ends_with("delay"), ends_with("time"))
flights_dt |>
group_by(year) |>
mutate(dep_hour = dep_time - floor_date(dep_time,"day")) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_line()
flights_dt |>
group_by(year) |>
mutate(dep_hour = hms::as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = )
flights_dt |>
group_by(year) |>
mutate(dep_hour = hms::as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = )
flights_dt |>
group_by(year) |>
mutate(dep_hour = as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = )
library(hms)
flights_dt |>
group_by(year) |>
mutate(dep_hour = as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = )
rlang::last_trace()
flights_dt |>
group_by(year) |>
mutate(dep_hour = as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = 12)
flights_dt |>
group_by(year) |>
mutate(dep_hour = as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = 60*30)
flights_dt |>
group_by(year) |>
mutate(dep_hour = as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = 24)
flights_dt |>
group_by(year) |>
mutate(dep_hour = as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = ) +
facet_grid(year)
flights_dt |>
group_by(year) |>
mutate(dep_hour = as_hms(dep_time - floor_date(dep_time,"day"))) |>
relocate(dep_hour, .before = 1) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = 100 ) +
facet_grid(year)
flights_dt |>
mutate(
dep_hour = hms::as_hms((dep_time %/% 100)*3600 + (dep_time %% 100)*60)
) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = 3600)  # binwidth in secondi
flights_dt |>
mutate(
dep_hour = dep_time %/% 100 + (dep_time %% 100)/60  # ora in formato decimale
) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = 1) +
scale_x_continuous(breaks = 0:23) +
labs(x = "Departure hour", y = "Count")
flights_dt |>
mutate(
dep_hour = as_hms(dep_time - floor_date(dep_time, "day"))  # ora del giorno come hms
) |>
ggplot(aes(x = dep_hour)) +
geom_freqpoly(binwidth = 3600) +   # binwidth in secondi (1 ora)
scale_x_time(breaks = scales::breaks_width("2 hours")) +
labs(x = "Departure time", y = "Count")
flights_dt |>
group_by(origin,dest) |>
mutate(
air_time2 = ((hour(dep_time)*60) + minute(dep_time))
)
flights_dt |>
group_by(origin,dest) |>
mutate(
air_time2 = ((hour(dep_time)*60) + minute(dep_time))
) |>
relocate(air_time2,air_time, .before = 1)
flights_dt |>
group_by(origin,dest) |>
mutate(
air_time2 = ((hour(arr_time)*60) + minute(arr_time)) - ((hour(dep_time)*60) + minute(dep_time))
) |>
relocate(air_time2,air_time, .before = 1)
flights |>
mutate(
week = floor_date(dep_time, "week")
)
flights |>
count(week = floor_date(dep_time, "week")) |>
ggplot(aes(x = week, y = dep_delay)) +
geom_line(aes(colour = year)) +
scale_color_continuous()
flights_dt |>
count(week = floor_date(dep_time, "week")) |>
ggplot(aes(x = week, y = dep_delay)) +
geom_line(aes(colour = year)) +
scale_color_continuous()
flights_dt |>
mutate(week = floor_date(dep_time, "week")) |>
ggplot(aes(x = week, y = dep_delay)) +
geom_line(aes(colour = year)) +
scale_color_continuous()
flights_dt |>
mutate(week = floor_date(dep_time, "day")) |>
ggplot(aes(x = week, y = dep_delay)) +
geom_line(aes(colour = year)) +
scale_color_continuous()
flights_dt |>
mutate(day = floor_date(dep_time, "day")) |>
ggplot(aes(x = day, y = dep_delay)) +
geom_line()
flights_dt |>
mutate(wday = wday(dep_time, label = TRUE)) |>
ggplot(aes(x = day, y = dep_delay)) +
geom_line()
flights_dt |>
mutate(wday = wday(dep_time, label = TRUE)) |>
ggplot(aes(x = wday, y = dep_delay)) +
geom_line()
flights_dt |>
mutate(wday = wday(dep_time, label = TRUE)) |>
group_by(wday) |>
summarise(mean_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(mean_delay) |>
ggplot(aes(x = wday, y = dep_delay)) +
geom_line()
flights_dt |>
mutate(wday = wday(dep_time, label = TRUE)) |>
group_by(wday) |>
summarise(mean_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(mean_delay) |>
ggplot(aes(x = mean_delay, y = dep_delay)) +
geom_line()
flights_dt |>
mutate(wday = wday(dep_time, label = TRUE)) |>
group_by(wday) |>
summarise(mean_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(mean_delay) |>
ggplot(aes(x = wday, y = mean_delay)) +
geom_line()
flights_dt |>
mutate(wday = wday(dep_time, label = TRUE)) |>
group_by(wday) |>
summarise(mean_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(mean_delay) |>
ggplot(aes(x = wday, y = mean_delay)) +
geom_col(fill = "skyblue") +
labs(x = "Day of week", y = "Average departure delay")
library(tidyverse) # tidyverse::lubridate
library(nycflights13)
days(overnight)
flights |>
mutate(
overnight = arr_time < dep_time
)
flights |>
mutate(
overnight = arr_time < dep_time
) |>
days(overnight)
overnight
flights |>
mutate(
overnight = arr_time < dep_time
) |>
days(overnight)
library(tidyverse)
library(tidyverse)
x <- c(2,4,6,2,NA,435,NA)
x
fill(everything(x))
x <- tibble(c(2,4,6,2,NA,435,NA))
x
fill(everything(x))
y <- tibble(
melo = 32948,5,6,2,NA,3,23,NA
)
y <- tibble(
melo = 32948,5,6,2,NA,3,23,
)
y
y <- tibble(
melo = c(32948,5,6,2,NA,3,23)
)
y
y <- tibble(
melo = c(32948,5,6,2,NA,3,23,NA)
)
y
fill(everything(y))
y |>
fill(everything())
x |>
fill(everything())
coalesce(x,0)
x |>
coalesce(x,0)
x <-c(2,4,6,2,NA,435,NA)
coalesce(x,0)
coalesce(x,"ciao")
coalesce(x,"ciao")
x <-c(2,4,6,2,NA,435,NA)
coalesce(x,"ciao")
coalesce(x,3)
library(nycflights13)
flights |>
distinct(faa = dest)
flights |>
distinct(carrier) |>
anti_join(planes)
flights |>
distinct(carrier) |>
anti_join(planes)
flights |>
distinct(faa = dest) |>
anti_join(airports)
flights |>
distinct(carrier) |>
anti_join(planes)
flights |>
distinct(planes) |>
anti_join(carrier)
flights
install.packages(c("duckdb", "arrow"))
install.packages(c("repurrrsive", "jsonlite"))
install.packages("rvest")
install.packages("rlang")
a <- 10.8
class(a)
b <- 7L
class(b)
View(esoph)
frequency <- esoph %>%
mutate(f = (ncases/ncontrols) * 100) %>%
ggplot(aes(x = f)) +
geom_boxplot()
library(tidyverse)
frequency <- esoph %>%
mutate(f = (ncases/ncontrols) * 100) %>%
ggplot(aes(x = f)) +
geom_boxplot()
frequency <- esoph %>%
mutate(f = (ncases/ncontrols)
esoph %>%
esoph |>
mutate(f = (ncases/ncontrols) * 100) |>
ggplot(aes(x = f)) +
geom_boxplot()
esoph |>
mutate(f = (ncases/ncontrols) * 100) |>
group_by(agegp)
esoph |>
mutate(f = (ncases/ncontrols) * 100) |>
group_by(agegp) |>
ggplot(aes(x = f)) +
geom_boxplot()
mutate(f = (ncases/ncontrols) * 100)
esoph |>
group_by(agegp)
mutate(f = (ncases/ncontrols) * 100)
esoph |>
group_by(agegp)
mutate(f = (ncases/ncontrols) * 100)
esoph |>
group_by(agegp) |>
mutate(f = (ncases/ncontrols) * 100)
esoph |>
group_by(agegp) |>
mutate(f = (ncases/ncontrols) * 100) |>
ggplot(aes(x = f)) +
geom_boxplot()
esoph |>
group_by(agegp) |>
mutate(f = (ncases/ncontrols) * 100) |>
ggplot(aes(x = f, y = after_stat(prop))) +
geom_boxplot()
esoph |>
group_by(agegp) |>
mutate(f = (ncases/ncontrols) * 100) |>
ggplot(aes(x = f, y = after_stat())) +
geom_boxplot()
age_f <- esoph %>%
group_by(agegp) %>%
summarise(f = sum(ncases)) %>%
ggplot(aes(x = f, y = agegp)) +
geom_boxplot()
age_f
---
editor_options:
markdown:
wrap: 72
install.packages("rmarkdown")
install.packages("knitr")
getwd()
ls
setwd("~/Bulk-RNA-Seq-Pipeline")
